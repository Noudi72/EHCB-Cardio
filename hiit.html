

<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>HIIT Cardio Intervall</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
      font-family: 'Roboto', Arial, sans-serif;
      color: #222;
      min-height: 100vh;
    }
    .container {
      max-width: 420px;
      margin: 0 auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .phaseBox {
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 2px 18px rgba(0,0,0,0.09), 0 1.5px 7px rgba(0,0,0,0.08);
      width: 100%;
      margin: 22px 0 16px 0;
      padding: 24px 22px 22px 22px;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: box-shadow 0.2s;
    }
    .phaseLabel {
      font-size: 1.6rem;
      font-weight: 700;
      margin-bottom: 6px;
      letter-spacing: 0.02em;
    }
    #phaseDesc {
      font-size: 1.1rem;
      color: #666;
      margin-bottom: 7px;
      text-align: center;
      min-height: 22px;
    }
    #timer {
      font-size: 3.3rem;
      font-weight: 700;
      margin: 8px 0 8px 0;
      letter-spacing: 0.02em;
      color: #0b7bfa;
      text-shadow: 0 2px 8px rgba(11,123,250,0.10);
    }
    #phaseInfo {
      font-size: 1.04rem;
      margin-bottom: 4px;
      color: #888;
      text-align: center;
    }
    #phaseCount {
      font-size: 1.05rem;
      color: #888;
      margin-bottom: 0;
    }
    .btn-row {
      display: flex;
      gap: 12px;
      margin: 18px 0 12px 0;
      flex-wrap: wrap;
      justify-content: center;
    }
    .btn {
      font-family: inherit;
      font-size: 1.08rem;
      padding: 9px 23px;
      border-radius: 11px;
      border: none;
      background: #0b7bfa;
      color: #fff;
      font-weight: 600;
      box-shadow: 0 1.5px 7px rgba(11,123,250,0.08);
      cursor: pointer;
      transition: background 0.18s;
    }
    .btn:active {
      background: #095eb7;
    }
    .btn.secondary {
      background: #f5f5f5;
      color: #0b7bfa;
      border: 1px solid #e0e0e0;
      box-shadow: none;
    }
    .btn.secondary:active {
      background: #e2e8f0;
    }
    .edit-table-container {
      width: 100%;
      margin-bottom: 18px;
      overflow-x: auto;
      border-radius: 12px;
      background: #fff;
      box-shadow: 0 2px 10px rgba(0,0,0,0.04);
      padding: 12px 8px 6px 8px;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      min-width: 330px;
      font-size: 1rem;
    }
    th, td {
      text-align: left;
      padding: 7px 8px;
    }
    th {
      background: #f4f6fa;
      font-weight: 600;
      color: #0b7bfa;
      font-size: 1.01rem;
      border-bottom: 1.5px solid #e0e7ef;
    }
    tr {
      border-bottom: 1px solid #e4e4e4;
    }
    tr:last-child {
      border-bottom: none;
    }
    td input, td select {
      font-size: 1.01rem;
      border-radius: 6px;
      border: 1px solid #d5d7db;
      padding: 4px 6px;
      width: 97%;
      font-family: inherit;
      background: #f9fafe;
    }
    .table-btn {
      background: none;
      border: none;
      color: #0b7bfa;
      font-size: 1.16rem;
      cursor: pointer;
      margin: 0 2px;
      padding: 0 5px;
      transition: color 0.2s;
    }
    .table-btn:active {
      color: #095eb7;
    }
    .back-link {
      display: inline-block;
      margin-bottom: 8px;
      color: #0b7bfa;
      font-size: 1.08rem;
      text-decoration: none;
      font-weight: 500;
      background: none;
      border: none;
      cursor: pointer;
      border-radius: 8px;
      padding: 4px 10px;
      transition: background 0.17s;
    }
    .back-link:active {
      background: #e2e8f0;
    }
    @media (max-width: 570px) {
      .container {
        padding: 6px;
      }
      .phaseBox {
        padding: 18px 7px 16px 7px;
      }
      .edit-table-container {
        padding: 7px 2px 4px 2px;
      }
      table {
        font-size: 0.98rem;
        min-width: 260px;
      }
      .btn {
        font-size: 0.98rem;
        padding: 8px 11px;
      }
      #timer {
        font-size: 2.2rem;
      }
      .phaseLabel {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="back-link" onclick="window.location.href='index.html'">&larr; Zurück</button>
    <div class="phaseBox">
      <div class="phaseLabel" id="phaseLabel">Get Ready</div>
      <div id="phaseDesc"></div>
      <div id="timer">00:30</div>
      <div id="phaseInfo"></div>
      <div id="phaseCount"></div>
    </div>
    <div class="btn-row">
      <button class="btn" id="startBtn">Start</button>
      <button class="btn secondary" id="editBtn">Bearbeiten</button>
      <button class="btn secondary" id="resetBtn">Reset</button>
    </div>
    <div class="edit-table-container" id="editTableContainer" style="display:none;">
      <table id="phaseTable">
        <thead>
          <tr>
            <th>Phase</th>
            <th>Dauer (Sek.)</th>
            <th>Beschreibung</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <!-- Zeilen werden dynamisch hinzugefügt -->
        </tbody>
      </table>
      <button class="btn" style="margin-top:10px;" onclick="addPhase()">+ Phase</button>
    </div>
  </div>
  <audio id="audioBeep" src="beep.mp3" preload="auto"></audio>
  <audio id="audioStart" src="start.mp3" preload="auto"></audio>
  <audio id="audioEnd" src="end.mp3" preload="auto"></audio>
  <script>
    // HIIT-Phasen (Beispiel, wie aus Excel)
    // 1. Get Ready (30 Sek.), dann HIIT-Spezifisch (hier beispielhaft: 8x [Work 30s, Rest 15s])
    const defaultPhases = [
      { label: "Get Ready", duration: 30, desc: "" },
      { label: "Work", duration: 30, desc: "Volle Power!" },
      { label: "Rest", duration: 15, desc: "Erholung" },
      { label: "Work", duration: 30, desc: "Volle Power!" },
      { label: "Rest", duration: 15, desc: "Erholung" },
      { label: "Work", duration: 30, desc: "Volle Power!" },
      { label: "Rest", duration: 15, desc: "Erholung" },
      { label: "Work", duration: 30, desc: "Volle Power!" },
      { label: "Rest", duration: 15, desc: "Erholung" },
      { label: "Work", duration: 30, desc: "Volle Power!" },
      { label: "Rest", duration: 15, desc: "Erholung" },
      { label: "Work", duration: 30, desc: "Volle Power!" },
      { label: "Rest", duration: 15, desc: "Erholung" },
      { label: "Work", duration: 30, desc: "Volle Power!" },
      { label: "Rest", duration: 15, desc: "Erholung" },
      { label: "Work", duration: 30, desc: "Volle Power!" },
      { label: "Rest", duration: 15, desc: "Erholung" },
    ];
    let phases = JSON.parse(JSON.stringify(defaultPhases));
    let currentPhase = 0;
    let currentTime = phases[0].duration;
    let timer = null;
    let running = false;
    let editMode = false;
    const timerEl = document.getElementById('timer');
    const phaseLabelEl = document.getElementById('phaseLabel');
    const phaseDescEl = document.getElementById('phaseDesc');
    const phaseInfoEl = document.getElementById('phaseInfo');
    const phaseCountEl = document.getElementById('phaseCount');
    const startBtn = document.getElementById('startBtn');
    const editBtn = document.getElementById('editBtn');
    const resetBtn = document.getElementById('resetBtn');
    const editTableContainer = document.getElementById('editTableContainer');
    const phaseTable = document.getElementById('phaseTable').getElementsByTagName('tbody')[0];
    function pad(n) { return n < 10 ? '0'+n : n; }
    function renderPhase() {
      const p = phases[currentPhase];
      phaseLabelEl.textContent = p.label;
      phaseDescEl.textContent = p.desc || '';
      timerEl.textContent = pad(Math.floor(currentTime/60)) + ':' + pad(currentTime%60);
      if(currentPhase === 0) {
        phaseInfoEl.textContent = "Bereite dich vor";
        phaseCountEl.textContent = "";
      } else {
        let cycle = Math.floor((currentPhase-1)/2)+1;
        let totalCycles = Math.floor((phases.length-1)/2);
        phaseInfoEl.textContent = p.label === "Work" ? "Intensive Belastung" : "Kurze Pause";
        phaseCountEl.textContent = (p.label === "Work" || p.label === "Rest") ?
          `Intervall ${cycle} / ${totalCycles}` : "";
      }
    }
    function playBeep() {
      document.getElementById('audioBeep').play();
    }
    function playStart() {
      document.getElementById('audioStart').play();
    }
    function playEnd() {
      document.getElementById('audioEnd').play();
    }
    function nextPhase() {
      currentPhase++;
      if(currentPhase >= phases.length) {
        stopTimer();
        timerEl.textContent = "Fertig!";
        phaseLabelEl.textContent = "Workout beendet";
        phaseDescEl.textContent = "";
        phaseInfoEl.textContent = "";
        phaseCountEl.textContent = "";
        playEnd();
        return;
      }
      currentTime = phases[currentPhase].duration;
      // Startschuss NUR nach Get Ready
      if(currentPhase === 1) playStart();
      renderPhase();
    }
    function tick() {
      if(currentTime > 0) {
        if(currentTime <= 4 && currentTime > 1) playBeep();
        currentTime--;
        renderPhase();
      } else {
        nextPhase();
      }
    }
    function startTimer() {
      if(running) return;
      running = true;
      startBtn.disabled = true;
      editBtn.disabled = true;
      timer = setInterval(tick, 1000);
    }
    function stopTimer() {
      running = false;
      startBtn.disabled = false;
      editBtn.disabled = false;
      clearInterval(timer);
    }
    function resetAll() {
      stopTimer();
      currentPhase = 0;
      currentTime = phases[0].duration;
      renderPhase();
    }
    startBtn.onclick = startTimer;
    resetBtn.onclick = resetAll;
    editBtn.onclick = function() {
      editMode = !editMode;
      editTableContainer.style.display = editMode ? 'block' : 'none';
      if(editMode) {
        renderEditTable();
        startBtn.disabled = true;
        resetBtn.disabled = true;
      } else {
        startBtn.disabled = false;
        resetBtn.disabled = false;
      }
    };
    function renderEditTable() {
      phaseTable.innerHTML = '';
      for(let i=0; i<phases.length; i++) {
        let row = document.createElement('tr');
        // Phase
        let td1 = document.createElement('td');
        let inpLabel = document.createElement('input');
        inpLabel.type = 'text';
        inpLabel.value = phases[i].label;
        inpLabel.onchange = e => { phases[i].label = e.target.value; renderPhase(); };
        td1.appendChild(inpLabel);
        // Dauer
        let td2 = document.createElement('td');
        let inpDur = document.createElement('input');
        inpDur.type = 'number';
        inpDur.min = 1;
        inpDur.value = phases[i].duration;
        inpDur.onchange = e => { phases[i].duration = Math.max(1, parseInt(e.target.value)||1); renderPhase(); };
        td2.appendChild(inpDur);
        // Beschreibung
        let td3 = document.createElement('td');
        let inpDesc = document.createElement('input');
        inpDesc.type = 'text';
        inpDesc.value = phases[i].desc||'';
        inpDesc.onchange = e => { phases[i].desc = e.target.value; renderPhase(); };
        td3.appendChild(inpDesc);
        // Buttons
        let td4 = document.createElement('td');
        if(i>0) {
          let btnDel = document.createElement('button');
          btnDel.className = 'table-btn';
          btnDel.innerHTML = '🗑️';
          btnDel.onclick = () => { phases.splice(i,1); renderEditTable(); resetAll(); };
          td4.appendChild(btnDel);
        }
        row.appendChild(td1);
        row.appendChild(td2);
        row.appendChild(td3);
        row.appendChild(td4);
        phaseTable.appendChild(row);
      }
    }
    function addPhase() {
      phases.push({ label: "Work", duration: 30, desc: "" });
      renderEditTable();
    }
    // Initial Render
    renderPhase();
  </script>
</body>
</html>