<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cardio Intervall – Regeneration</title>
  <style>
    body {
      background: #000;
      color: #ffe028;
      font-family: 'Arial Rounded MT Bold', Arial, sans-serif;
      margin: 0;
      padding: 0;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .logo {
      display: block;
      margin: 15px auto 10px auto;
      width: 140px;
      max-width: 25vw;
      filter: drop-shadow(0 0 2px #ffe028cc);
    }
    #backBtn {
      position: fixed;
      top: 18px;
      left: 18px;
      z-index: 9;
      border: none;
      background: #ffe028;
      color: #000;
      font-weight: 900;
      font-size: 1.15em;
      border-radius: 32px;
      padding: 8px 22px;
      cursor: pointer;
      box-shadow: 0 0 12px #ffe028cc;
      transition: background 0.15s, color 0.15s;
    }
    #backBtn:hover {
      background: #fff;
      color: #222;
    }
    .phaseBox {
      margin: 50px auto 40px auto;
      max-width: 600px;
      width: 95vw;
      border-radius: 42px;
      box-shadow: 0 0 28px #ffe028cc;
      text-align: center;
      font-size: 3.2em;
      font-weight: 900;
      padding: 48px 0 44px 0;
      min-height: 260px;
      background: #222;
      color: #ffe028;
      transition: background 0.22s, color 0.22s;
      text-shadow: 0 0 12px #ffe028cc;
    }
    .phaseLabel {
      font-size: 2.4em;
      letter-spacing: 3px;
      font-weight: 900;
      margin-bottom: 22px;
      text-shadow: 0 0 18px #ffe028cc;
      font-family: 'Arial Rounded MT Bold', Arial, sans-serif;
      text-transform: uppercase;
    }
    #phaseDesc {
      font-size: 1.2em;
      margin-bottom: 22px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      text-shadow: 0 0 10px #ffe028bb;
    }
    #timer {
      font-size: 7.5em;
      font-family: 'Consolas', 'Menlo', 'Monaco', monospace;
      font-weight: 900;
      margin: 0 0 18px 0;
      letter-spacing: 3.2px;
      text-shadow: 0 0 20px #ffe028cc;
      line-height: 1.05;
    }
    #phaseInfo {
      font-size: 1.3em;
      margin-bottom: 14px;
      font-weight: 700;
      color: #ffe028cc;
      text-shadow: 0 0 8px #ffe028bb;
    }
    #phaseCount {
      font-size: 1.3em;
      margin-top: 20px;
      color: #ffe028dd;
      font-weight: 800;
      opacity: 0.98;
      text-shadow: 0 0 14px #ffe028cc;
    }
    .cardio-buttons {
      text-align: center;
      margin-bottom: 46px;
      margin-top: 10px;
    }
    .cardio-buttons button {
      background: #ffe028;
      color: #000;
      font-weight: 900;
      font-size: 1.18em;
      border: none;
      border-radius: 24px;
      margin: 0 14px 0 14px;
      padding: 14px 28px;
      cursor: pointer;
      box-shadow: 0 0 14px #ffe028cc;
      transition: background 0.18s, color 0.18s;
    }
    .cardio-buttons button:hover {
      background: #fff;
      color: #222;
    }
    .edit-table {
      max-width: 520px;
      margin: 0 auto 30px auto;
      border-radius: 24px;
      overflow: hidden;
      box-shadow: 0 0 24px #ffe028bb;
      background: #111;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: #111;
      border-radius: 8px;
      font-size: 1.17em;
      color: #ffe028dd;
      font-weight: 700;
    }
    th, td {
      padding: 0.75em 0.6em;
      text-align: center;
      border-bottom: 1px solid #333;
      user-select: none;
    }
    th {
      background: #222;
      color: #ffe028;
      font-weight: 900;
      letter-spacing: 1.4px;
      user-select: none;
    }
    td {
      background: #222;
      color: #ffe028cc;
      font-weight: 700;
      cursor: default;
      user-select: text;
    }
    td[contenteditable="true"] {
      background: #333;
      color: #fff;
      font-weight: 900;
      outline: 2px solid #ffe028cc;
      cursor: text;
      user-select: text;
    }
    @media (min-width: 800px) {
      .phaseBox {
        max-width: 450px;
        min-height: 180px;
        padding: 24px 0 24px 0;
        margin-top: 48px;
        font-size: 2.2em;
      }
      #timer {
        font-size: 3.8em;
      }
      .phaseLabel {
        font-size: 1.6em;
      }
      #phaseDesc {
        font-size: 1em;
        margin-bottom: 14px;
      }
      #phaseInfo {
        font-size: 1em;
        margin-bottom: 10px;
      }
      #phaseCount {
        font-size: 1.1em;
        margin-top: 15px;
      }
    }
    @media (max-width: 600px) {
      .logo {
        margin-top: 8px;
        width: 110px;
        max-width: 30vw;
      }
      .phaseBox {
        font-size: 1.5em;
        padding: 36px 0 32px 0;
        min-height: 280px;
        max-width: 98vw;
        width: 99vw;
        border-radius: 20px;
        margin: 28px auto 14px auto;
      }
      #timer {
        font-size: 4.2em;
        margin-bottom: 10px;
      }
      .phaseLabel {
        font-size: 1.2em;
        margin-bottom: 12px;
      }
      #phaseDesc {
        font-size: 0.95em;
        margin-bottom: 10px;
      }
      #phaseInfo {
        font-size: 0.95em;
        margin-bottom: 8px;
      }
      #phaseCount {
        font-size: 1em;
        margin-top: 18px;
      }
      .cardio-buttons button {
        font-size: 1.05em;
        padding: 12px 24px;
        margin: 0 8px 0 8px;
      }
      .edit-table {
        max-width: 95vw;
        margin-bottom: 22px;
      }
      table {
        font-size: 1em;
      }
      th, td {
        padding: 0.5em 0.3em;
      }
    }
  </style>
</head>
<body>
  <img src="EHCB_Logo.svg" alt="EHCB Logo" class="logo" />
  <button id="backBtn" onclick="window.location.href='index.html'">Zurück</button>
  <div class="phaseBox" id="phaseBox">
    <div class="phaseLabel" id="phaseLabel">Get Ready</div>
    <div id="phaseDesc">Bereite dich vor!</div>
    <div id="timer">00:30</div>
    <div id="phaseInfo"></div>
    <div id="phaseCount"></div>
  </div>
  <div class="cardio-buttons">
    <button id="startBtn">Start</button>
    <button id="editBtn">Bearbeiten</button>
    <button id="resetBtn">Reset</button>
  </div>
  <div class="edit-table" id="editTableWrapper">
    <table id="phaseTable">
      <thead>
        <tr>
          <th>Phase</th>
          <th>Dauer (Sek.)</th>
          <th>Beschreibung</th>
        </tr>
      </thead>
      <tbody>
        <tr><td contenteditable="true">Get Ready</td><td contenteditable="true">30</td><td contenteditable="true">Bereite dich vor!</td></tr>
        <tr><td contenteditable="true">Locker</td><td contenteditable="true">300</td><td contenteditable="true">Locker fahren</td></tr>
        <tr><td contenteditable="true">Erholt</td><td contenteditable="true">300</td><td contenteditable="true">Erholt fahren</td></tr>
        <tr><td contenteditable="true">Locker</td><td contenteditable="true">300</td><td contenteditable="true">Locker fahren</td></tr>
        <tr><td contenteditable="true">Erholt</td><td contenteditable="true">300</td><td contenteditable="true">Erholt fahren</td></tr>
        <tr><td contenteditable="true">Abwechselnd</td><td contenteditable="true">300</td><td contenteditable="true">Abwechselnd fahren</td></tr>
        <tr><td contenteditable="true">Cooldown</td><td contenteditable="true">300</td><td contenteditable="true">Abkühlen</td></tr>
      </tbody>
    </table>
  </div>
<script>
  let phases = [
    {label: "Get Ready", desc: "Bereite dich vor!", duration: 30},
    {label: "Locker", desc: "Locker fahren", duration: 300},
    {label: "Erholt", desc: "Erholt fahren", duration: 300},
    {label: "Locker", desc: "Locker fahren", duration: 300},
    {label: "Erholt", desc: "Erholt fahren", duration: 300},
    {label: "Abwechselnd", desc: "Abwechselnd fahren", duration: 300},
    {label: "Cooldown", desc: "Abkühlen", duration: 300}
  ];
  let currentPhase = 0, timer = null, running = false, t = phases[0].duration;

  function updateUI() {
    document.getElementById("phaseLabel").textContent = phases[currentPhase].label;
    document.getElementById("phaseDesc").textContent = phases[currentPhase].desc;
    document.getElementById("timer").textContent = ("0" + Math.floor(t / 60)).slice(-2) + ":" + ("0" + (t % 60)).slice(-2);
    document.getElementById("phaseInfo").textContent = phases[currentPhase].desc;
    document.getElementById("phaseCount").textContent = `Phase ${currentPhase + 1} von ${phases.length}`;
  }

  function nextPhase() {
    if (currentPhase < phases.length - 1) {
      currentPhase++;
      t = phases[currentPhase].duration;
      updateUI();
    } else {
      running = false;
      clearInterval(timer);
      document.getElementById("startBtn").disabled = false;
    }
  }

  function startProgram() {
    if (running) return;
    running = true;
    document.getElementById("startBtn").disabled = true;
    timer = setInterval(() => {
      t--;
      if (t < 0) {
        nextPhase();
      } else {
        updateUI();
      }
    }, 1000);
  }

  function resetProgram() {
    clearInterval(timer);
    running = false;
    currentPhase = 0;
    t = phases[0].duration;
    updateUI();
    document.getElementById("startBtn").disabled = false;
  }

  function editPhases() {
    let tbl = document.getElementById("phaseTable").tBodies[0];
    for (let i = 0; i < tbl.rows.length; i++) {
      for (let j = 0; j < 3; j++) {
        tbl.rows[i].cells[j].contentEditable = true;
      }
    }
  }

  function savePhases() {
    let tbl = document.getElementById("phaseTable").tBodies[0];
    let newPhases = [];
    for (let i = 0; i < tbl.rows.length; i++) {
      let name = tbl.rows[i].cells[0].textContent.trim();
      let dur = parseInt(tbl.rows[i].cells[1].textContent.trim(), 10);
      let desc = tbl.rows[i].cells[2].textContent.trim();
      if (name && !isNaN(dur) && dur > 0) {
        newPhases.push({label: name, desc: desc, duration: dur});
      }
    }
    if (newPhases.length > 0) {
      phases = newPhases;
      resetProgram();
    }
    for (let i = 0; i < tbl.rows.length; i++) {
      for (let j = 0; j < 3; j++) {
        tbl.rows[i].cells[j].contentEditable = false;
      }
    }
  }

  document.getElementById("startBtn").onclick = startProgram;
  document.getElementById("resetBtn").onclick = resetProgram;

  let editMode = false;
  document.getElementById("editBtn").onclick = function () {
    if (!editMode) {
      editPhases();
      this.textContent = "Speichern";
      editMode = true;
    } else {
      savePhases();
      this.textContent = "Bearbeiten";
      editMode = false;
    }
  };

  updateUI();
</script>
</body>
</html>